{"version":3,"sources":["components/Person.js","components/PersonForm.js","components/Filter.js","services/personService.js","components/Notification.js","App.js","index.js"],"names":["Person","person","handleClick","name","number","data-id","id","data-name","onClick","PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","searchName","handleSearchChange","baseUrl","newPerson","axios","post","then","response","data","get","delete","put","Notification","message","messageType","className","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchName","setMessage","setMessageType","useEffect","personService","deletePerson","event","preventDefault","target","dataset","window","confirm","console","log","setTimeout","catch","err","alert","removePerson","namesToShow","filter","toLowerCase","includes","nameExists","find","p","updatedPerson","returnedPerson","updatePerson","map","length","concat","i","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9899babc.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({ person, handleClick }) => {\r\n  return (\r\n    <div>\r\n      <li>{person.name} {person.number}</li>\r\n\r\n      <button\r\n        data-id={person.id}\r\n        data-name={person.name}\r\n        onClick={handleClick}\r\n      >\r\n        Delete\r\n        </button>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={props.addPerson}>\r\n                <div>\r\n                    Name:\r\n                <input value={props.newName} onChange={props.handleNameChange} />\r\n                </div>\r\n\r\n                <div>\r\n                    Number:\r\n                <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n                </div>\r\n\r\n                <div>\r\n                    <button type=\"submit\">Add</button>\r\n                </div>\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Filter = (props) => {\r\n\r\n    return (\r\n        <div>\r\n            Filter names with : <br />\r\n            <input value={props.searchName} onChange={props.handleSearchChange} />\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Filter;","import axios from 'axios'\r\n\r\n//const baseUrl = \"http://localhost:3001/api/persons\"; //development\r\nconst baseUrl = \"https://phonebook-node-js.herokuapp.com/api/persons\"; //heroku backend\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n\r\n    return request.then((response) => response.data);\r\n};\r\n\r\n//for synching the new person into db.json\r\nconst create = (newPerson) => {\r\n    const request = axios.post(baseUrl, newPerson);\r\n\r\n    return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n\r\n    return request;\r\n};\r\n\r\nconst update = (id, person) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, person);\r\n  \r\n    return request.then((response) => response.data);\r\n};\r\n \r\n\r\nexport default { create, getAll, remove, update };","import React from 'react';\r\n\r\nconst Notification = ({ message, messageType }) => {\r\n    //No message\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div className={messageType}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react'\nimport Person from './components/Person'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personService from './services/personService'\nimport Notification from './components/Notification';\nimport './index.css';\n\nconst App = (props) => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchName, setSearchName] = useState('')\n  const [message, setMessage] = useState(null);\n  const [messageType, setMessageType] = useState('');\n\n  //load persons from db.json at start\n  const hook = () => {\n    personService\n      .getAll()\n      .then((response) => {\n        setPersons(response);\n      });\n  }\n  //parametrit: efekti, tyyppi \n  //(tyhjä [] -> vain komponentin ensimmäisen renderöinnin jälkeen)\n  useEffect(hook, [])\n\n  const updatePerson = () => {\n    const person = persons.find((p) => p.name === newName);\n\n    const updateOK = window.confirm(\n      `${person.name} is already added to the phonebook. Would you like to update the information?`\n    )\n\n    if (updateOK) {\n      const updatedPerson = { ...person, number: newNumber };\n      const id = person.id;\n\n      return personService\n        .update(id, updatedPerson)\n        .then((returnedPerson) => {\n          return returnedPerson;\n        })\n        .catch((err) => {\n          console.log(err);\n\n          //Message\n          setMessage(`Information of ${updatedPerson.name} has already been removed from server `)\n          setMessageType('error')\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n\n          return false;\n        });\n    }\n\n  }\n\n  //TODO: add more error handling to name and phone number  \n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const nameExists = persons.find(person => person.name.toLowerCase() === newName.toLowerCase());\n\n    //If name exists in phonebook, just update the phone number\n    if (nameExists) {\n      updatePerson()\n        .then((updatedPerson) => {\n\n          if (!updatedPerson) {\n            console.log('an error occurred')\n          } else {\n            setPersons(persons.map(person => person.id !== nameExists.id ? person : updatedPerson)) //switch old person with updated person if found \n\n            //Message\n            setMessage(`Details for ${updatedPerson.name} successfully updated!`)\n            setMessageType('success')\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n\n            //Clear state\n            setNewName('')\n            setNewNumber('')\n          }\n\n        })\n        .catch((err) => {\n          //Message\n          setMessage(`Did not manage to change details for ${err.name}.`);\n          setMessageType('error')\n          setTimeout(() => {\n            setMessage(null)\n            setMessageType('')\n          }, 5000);\n\n          console.log(err);\n        })\n    } else {\n      //If name doesn't exist, create person \n      const newPerson = {\n        id: persons.length + 1,\n        name: newName,\n        number: newNumber\n      }\n\n      personService.create(newPerson)\n        .then((response) => {\n          //Better information messsage\n          setMessage(`Created ${response.name}!`)\n          setMessageType('success')\n          //Information message flashes out in..\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n\n          setPersons(persons.concat(response));\n        })\n\n      //Clear state\n      setNewName('')\n      setNewNumber('')\n    }\n  }\n\n  const removePerson = (id, name) => {\n    //remove from db.json\n    personService\n      .remove(id)\n      .then((response) => {\n\n        //Reload persons - could also be done with filter, maybe?\n        personService\n          .getAll()\n          .then((response) => {\n            setPersons(response);\n\n            //add success message \n            console.log(response)\n            setMessage(`${name} deleted successfully! `)\n            //Information message flashes out in..\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n\n          });\n\n      })\n      .catch((err) => {\n\n        //TODO: Doesn't come here even when deleting unexisting resource \n        console.log(err);\n        window.alert(`An error has occurred. `);\n        //Message\n        setMessage(`Information of ${name} has already been removed from server `)\n        setMessageType('error')\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n  };\n\n  const deletePerson = (event) => {\n    event.preventDefault()\n\n    const id = event.target.dataset.id;\n    const name = event.target.dataset.name;\n\n    const deleteOK = window.confirm(`Are you sure you want to delete ${name}?`);\n\n    if (deleteOK) {\n      removePerson(id, name);\n\n    }\n  }\n\n  //TODO: Wrap all handle change under single handleChange \n  //Setting state using event handler\n  const handleNameChange = (event) => {\n    //console.log(event.target.value) //check value\n    setNewName(event.target.value) //set value as new name \n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    //console.log(event.target.value)\n    setSearchName(event.target.value)\n  }\n\n  //show also new added names, if empty shows all \n  const namesToShow = persons.filter(person => person.name.toLowerCase().includes(searchName.toLowerCase()))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={message} setMessage={setMessage} messageType={messageType} setMessageType={setMessageType} />\n\n      <Filter\n        searchName={searchName}\n        handleSearchChange={handleSearchChange}\n      />\n\n      <h2>Add new: </h2>\n      <PersonForm addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n\n      <ul>\n        {namesToShow.map((person, i) =>\n          <Person key={i} person={person} handleClick={deletePerson} />\n        )}\n      </ul>\n\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}